(()=>{"use strict";const e=e=>{let t=[];for(let r=0;r<e[0].length;r++){t[r]=[];for(let n=0;n<e.length;n++)t[r].push(e[n][r])}return t},t=(e,t)=>{let r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]+t[n];return r},r=(e,t)=>{const r=e.length,n=e[0].length,o=t[0].length;if(n!==t.length)throw new Error("The number of columns in the first matrix must match the number of rows in the second matrix.");const s=[];for(let i=0;i<r;i++){s[i]=[];for(let r=0;r<o;r++){let o=0;for(let s=0;s<n;s++)o+=e[i][s]*t[s][r];s[i][r]=o}}return s},n=(e,t)=>{const r=e.length,n=e[0].length;if(n!==t.length)throw new Error("The number of columns in the matrix must match the length of the vector.");const o=[];for(let s=0;s<r;s++){let r=0;for(let o=0;o<n;o++)r+=e[s][o]*t[o];o[s]=r}return o},o=(e,t)=>{const r=e.length,n=e[0].length,o=[];for(let s=0;s<r;s++){o[s]=[];for(let r=0;r<n;r++)o[s][r]=e[s][r]*t}return o},s=(e,t)=>{const r=[];for(let n=0;n<e.length;n++)r[n]=e[n]*t;return r},i=e=>{const t=e.length,r=Array(t),n=Array(t);for(let o=0;o<t;o++){r[o]=[],n[o]=[];for(let e=0;e<t;e++)r[o][e]=0,n[o][e]=0}for(let o=0;o<t;o++){for(let s=o;s<t;s++){let t=0;for(let e=0;e<o;e++)t+=r[o][e]*n[e][s];n[o][s]=e[o][s]-t}for(let s=o;s<t;s++)if(o===s)r[o][o]=1;else{let t=0;for(let e=0;e<o;e++)t+=r[s][e]*n[e][o];r[s][o]=(e[s][o]-t)/n[o][o]}}return{lower:r,upper:n}},l=(e,t)=>{const r=i(e),n=e.length,o=[],s=[];for(let i=0;i<n;i++){let e=0;for(let t=0;t<i;t++)e+=r.lower[i][t]*o[t];o[i]=(t[i]-e)/r.lower[i][i]}for(let i=n-1;i>=0;i--){let e=0;for(let t=i+1;t<n;t++)e+=r.upper[i][t]*s[t];s[i]=(o[i]-e)/r.upper[i][i]}return s};var f=1e6,c=1e6,u="[big.js] ",h=u+"Invalid ",a=h+"decimal places",m=h+"rounding mode",p=u+"Division by zero",g={},w=void 0,d=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function v(e,t,r,n){var o=e.c;if(r===w&&(r=e.constructor.RM),0!==r&&1!==r&&2!==r&&3!==r)throw Error(m);if(t<1)n=3===r&&(n||!!o[0])||0===t&&(1===r&&o[0]>=5||2===r&&(o[0]>5||5===o[0]&&(n||o[1]!==w))),o.length=1,n?(e.e=e.e-t+1,o[0]=1):o[0]=e.e=0;else if(t<o.length){if(n=1===r&&o[t]>=5||2===r&&(o[t]>5||5===o[t]&&(n||o[t+1]!==w||1&o[t-1]))||3===r&&(n||!!o[0]),o.length=t,n)for(;++o[--t]>9;)if(o[t]=0,0===t){++e.e,o.unshift(1);break}for(t=o.length;!o[--t];)o.pop()}return e}function E(e,t,r){var n=e.e,o=e.c.join(""),s=o.length;if(t)o=o.charAt(0)+(s>1?"."+o.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)o="0"+o;o="0."+o}else if(n>0)if(++n>s)for(n-=s;n--;)o+="0";else n<s&&(o=o.slice(0,n)+"."+o.slice(n));else s>1&&(o=o.charAt(0)+"."+o.slice(1));return e.s<0&&r?"-"+o:o}g.abs=function(){var e=new this.constructor(this);return e.s=1,e},g.cmp=function(e){var t,r=this,n=r.c,o=(e=new r.constructor(e)).c,s=r.s,i=e.s,l=r.e,f=e.e;if(!n[0]||!o[0])return n[0]?s:o[0]?-i:0;if(s!=i)return s;if(t=s<0,l!=f)return l>f^t?1:-1;for(i=(l=n.length)<(f=o.length)?l:f,s=-1;++s<i;)if(n[s]!=o[s])return n[s]>o[s]^t?1:-1;return l==f?0:l>f^t?1:-1},g.div=function(e){var t=this,r=t.constructor,n=t.c,o=(e=new r(e)).c,s=t.s==e.s?1:-1,i=r.DP;if(i!==~~i||i<0||i>f)throw Error(a);if(!o[0])throw Error(p);if(!n[0])return e.s=s,e.c=[e.e=0],e;var l,c,u,h,m,g=o.slice(),d=l=o.length,E=n.length,b=n.slice(0,l),y=b.length,D=e,N=D.c=[],A=0,M=i+(D.e=t.e-e.e)+1;for(D.s=s,s=M<0?0:M,g.unshift(0);y++<l;)b.push(0);do{for(u=0;u<10;u++){if(l!=(y=b.length))h=l>y?1:-1;else for(m=-1,h=0;++m<l;)if(o[m]!=b[m]){h=o[m]>b[m]?1:-1;break}if(!(h<0))break;for(c=y==l?o:g;y;){if(b[--y]<c[y]){for(m=y;m&&!b[--m];)b[m]=9;--b[m],b[y]+=10}b[y]-=c[y]}for(;!b[0];)b.shift()}N[A++]=h?u:++u,b[0]&&h?b[y]=n[d]||0:b=[n[d]]}while((d++<E||b[0]!==w)&&s--);return N[0]||1==A||(N.shift(),D.e--,M--),A>M&&v(D,M,r.RM,b[0]!==w),D},g.eq=function(e){return 0===this.cmp(e)},g.gt=function(e){return this.cmp(e)>0},g.gte=function(e){return this.cmp(e)>-1},g.lt=function(e){return this.cmp(e)<0},g.lte=function(e){return this.cmp(e)<1},g.minus=g.sub=function(e){var t,r,n,o,s=this,i=s.constructor,l=s.s,f=(e=new i(e)).s;if(l!=f)return e.s=-f,s.plus(e);var c=s.c.slice(),u=s.e,h=e.c,a=e.e;if(!c[0]||!h[0])return h[0]?e.s=-f:c[0]?e=new i(s):e.s=1,e;if(l=u-a){for((o=l<0)?(l=-l,n=c):(a=u,n=h),n.reverse(),f=l;f--;)n.push(0);n.reverse()}else for(r=((o=c.length<h.length)?c:h).length,l=f=0;f<r;f++)if(c[f]!=h[f]){o=c[f]<h[f];break}if(o&&(n=c,c=h,h=n,e.s=-e.s),(f=(r=h.length)-(t=c.length))>0)for(;f--;)c[t++]=0;for(f=t;r>l;){if(c[--r]<h[r]){for(t=r;t&&!c[--t];)c[t]=9;--c[t],c[r]+=10}c[r]-=h[r]}for(;0===c[--f];)c.pop();for(;0===c[0];)c.shift(),--a;return c[0]||(e.s=1,c=[a=0]),e.c=c,e.e=a,e},g.mod=function(e){var t,r=this,n=r.constructor,o=r.s,s=(e=new n(e)).s;if(!e.c[0])throw Error(p);return r.s=e.s=1,t=1==e.cmp(r),r.s=o,e.s=s,t?new n(r):(o=n.DP,s=n.RM,n.DP=n.RM=0,r=r.div(e),n.DP=o,n.RM=s,this.minus(r.times(e)))},g.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},g.plus=g.add=function(e){var t,r,n,o=this,s=o.constructor;if(e=new s(e),o.s!=e.s)return e.s=-e.s,o.minus(e);var i=o.e,l=o.c,f=e.e,c=e.c;if(!l[0]||!c[0])return c[0]||(l[0]?e=new s(o):e.s=o.s),e;if(l=l.slice(),t=i-f){for(t>0?(f=i,n=c):(t=-t,n=l),n.reverse();t--;)n.push(0);n.reverse()}for(l.length-c.length<0&&(n=c,c=l,l=n),t=c.length,r=0;t;l[t]%=10)r=(l[--t]=l[t]+c[t]+r)/10|0;for(r&&(l.unshift(r),++f),t=l.length;0===l[--t];)l.pop();return e.c=l,e.e=f,e},g.pow=function(e){var t=this,r=new t.constructor("1"),n=r,o=e<0;if(e!==~~e||e<-1e6||e>c)throw Error(h+"exponent");for(o&&(e=-e);1&e&&(n=n.times(t)),e>>=1;)t=t.times(t);return o?r.div(n):n},g.prec=function(e,t){if(e!==~~e||e<1||e>f)throw Error(h+"precision");return v(new this.constructor(this),e,t)},g.round=function(e,t){if(e===w)e=0;else if(e!==~~e||e<-f||e>f)throw Error(a);return v(new this.constructor(this),e+this.e+1,t)},g.sqrt=function(){var e,t,r,n=this,o=n.constructor,s=n.s,i=n.e,l=new o("0.5");if(!n.c[0])return new o(n);if(s<0)throw Error(u+"No square root");0===(s=Math.sqrt(n+""))||s===1/0?((t=n.c.join("")).length+i&1||(t+="0"),i=((i+1)/2|0)-(i<0||1&i),e=new o(((s=Math.sqrt(t))==1/0?"5e":(s=s.toExponential()).slice(0,s.indexOf("e")+1))+i)):e=new o(s+""),i=e.e+(o.DP+=4);do{r=e,e=l.times(r.plus(n.div(r)))}while(r.c.slice(0,i).join("")!==e.c.slice(0,i).join(""));return v(e,(o.DP-=4)+e.e+1,o.RM)},g.times=g.mul=function(e){var t,r=this,n=r.constructor,o=r.c,s=(e=new n(e)).c,i=o.length,l=s.length,f=r.e,c=e.e;if(e.s=r.s==e.s?1:-1,!o[0]||!s[0])return e.c=[e.e=0],e;for(e.e=f+c,i<l&&(t=o,o=s,s=t,c=i,i=l,l=c),t=new Array(c=i+l);c--;)t[c]=0;for(f=l;f--;){for(l=0,c=i+f;c>f;)l=t[c]+s[f]*o[c-f-1]+l,t[c--]=l%10,l=l/10|0;t[c]=l}for(l?++e.e:t.shift(),f=t.length;!t[--f];)t.pop();return e.c=t,e},g.toExponential=function(e,t){var r=this,n=r.c[0];if(e!==w){if(e!==~~e||e<0||e>f)throw Error(a);for(r=v(new r.constructor(r),++e,t);r.c.length<e;)r.c.push(0)}return E(r,!0,!!n)},g.toFixed=function(e,t){var r=this,n=r.c[0];if(e!==w){if(e!==~~e||e<0||e>f)throw Error(a);for(e=e+(r=v(new r.constructor(r),e+r.e+1,t)).e+1;r.c.length<e;)r.c.push(0)}return E(r,!1,!!n)},g[Symbol.for("nodejs.util.inspect.custom")]=g.toJSON=g.toString=function(){var e=this,t=e.constructor;return E(e,e.e<=t.NE||e.e>=t.PE,!!e.c[0])},g.toNumber=function(){var e=Number(E(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(u+"Imprecise conversion");return e},g.toPrecision=function(e,t){var r=this,n=r.constructor,o=r.c[0];if(e!==w){if(e!==~~e||e<1||e>f)throw Error(h+"precision");for(r=v(new n(r),e,t);r.c.length<e;)r.c.push(0)}return E(r,e<=r.e||r.e<=n.NE||r.e>=n.PE,!!o)},g.valueOf=function(){var e=this,t=e.constructor;if(!0===t.strict)throw Error(u+"valueOf disallowed");return E(e,e.e<=t.NE||e.e>=t.PE,!0)};var b=function e(){function t(r){var n=this;if(!(n instanceof t))return r===w?e():new t(r);if(r instanceof t)n.s=r.s,n.e=r.e,n.c=r.c.slice();else{if("string"!==typeof r){if(!0===t.strict&&"bigint"!==typeof r)throw TypeError(h+"value");r=0===r&&1/r<0?"-0":String(r)}!function(e,t){var r,n,o;if(!d.test(t))throw Error(h+"number");e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(r=t.indexOf("."))>-1&&(t=t.replace(".",""));(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length);for(o=t.length,n=0;n<o&&"0"==t.charAt(n);)++n;if(n==o)e.c=[e.e=0];else{for(;o>0&&"0"==t.charAt(--o););for(e.e=r-n-1,e.c=[],r=0;n<=o;)e.c[r++]=+t.charAt(n++)}}(n,r)}n.constructor=t}return t.prototype=g,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=false,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}();const y=b,D=(e,t)=>{let r=t.assembly.nsets.find((t=>t.setname==e));if(!r)throw new Error("Set not found");return r.nodes},N=(e,t)=>(t.steps[0].boundaries.temperature.forEach((r=>{let n=r.setName,o=t.assembly.nsets.find((e=>e.setname==n));if(!o)throw new Error("Nset not found");o.nodes.forEach((t=>{for(let r=0;r<e.length;r++)r!=t-1&&(e[t-1][r]=0)}))})),e),A=(e,t)=>(t.steps[0].boundaries.temperature.forEach((r=>{let n=r.setName,o=t.assembly.nsets.find((e=>e.setname==n));if(!o)throw new Error("Nset not found");o.nodes.forEach((t=>{for(let r=0;r<e.length;r++)r!=t-1&&(e[r][t-1]=0)}))})),e),M=(e,t)=>{let r=[];for(let n=0;n<e.length;n++)r.push(0);return t.steps[0].boundaries.temperature.forEach((n=>{let o=n.setName,s=t.assembly.nsets.find((e=>e.setname==o));if(!s)throw new Error("Nset not found");s.nodes.forEach((t=>{r[t-1]=e[t-1][t-1]*n.temperature;for(let o=0;o<r.length;o++)o!=t-1&&(r[o]-=e[o][t-1]*n.temperature)}))})),r},P=(e,t,r,n)=>{var o;let s=r.find((t=>-1!=t.elements.indexOf(e)));if(!s)throw new Error("Element not in elset");let i=s.setname,l=n.find((e=>e.elsetName==i));if(!l)throw new Error("Elset not in section");return null!==(o=t[l.name])&&void 0!==o?o:0},x=(e,t,r,n)=>{var o;let s=r.find((t=>-1!=t.elements.indexOf(e)));if(!s)throw new Error("Element not in elset");let i=s.setname,l=n.find((e=>e.elsetName==i));if(!l)throw new Error("Elset not in section");return null!==(o=t[l.name])&&void 0!==o?o:0},O=(e,t,r,n)=>{var o;let s=r.find((t=>-1!=t.elements.indexOf(e)));if(!s)throw new Error("Element not in elset");let i=s.setname,l=n.find((e=>e.elsetName==i));if(!l)throw new Error("Elset not in section");return null!==(o=t[l.name])&&void 0!==o?o:0},k=(t,n)=>{let s=t.problemData[0].nodes,i=t.problemData[0].elements,l=new Array(s.length);for(let e=0;e<l.length;e++)l[e]=new Array(s.length).fill(0);for(let f=0;f<i.length;f++){let c=P(i[f][0],n,t.problemData[0].lsets,t.problemData[0].sections),u=[[c,0],[0,c]],h=s[i[f][1]-1][1],a=s[i[f][1]-1][2],m=s[i[f][2]-1][1],p=s[i[f][2]-1][2],g=s[i[f][3]-1][1],w=s[i[f][3]-1][2],d=p-w,v=w-a,E=a-p,b=g-m,y=h-g,D=m-h,N=.5*Math.abs(h*(p-w)+m*(w-a)+g*(a-p)),A=[[d,v,E],[b,y,D]],M=o(r(r(e(A),u),A),1/4*N);l=q(l,M,i[f][1],i[f][2],i[f][3])}return l},R=(e,t,r)=>{let n=e.problemData[0].nodes,o=e.problemData[0].elements,s=new Array(n.length);for(let i=0;i<s.length;i++)s[i]=new Array(n.length).fill(0);for(let i=0;i<o.length;i++){let l=x(o[i][0],t,e.problemData[0].lsets,e.problemData[0].sections),f=O(o[i][0],r,e.problemData[0].lsets,e.problemData[0].sections),c=[[n[o[i][1]-1][1],n[o[i][1]-1][2]],[n[o[i][2]-1][1],n[o[i][2]-1][2]],[n[o[i][3]-1][1],n[o[i][3]-1][2]]],u=j(c,l,f);s=q(s,u,o[i][1],o[i][2],o[i][3])}return s},j=(e,t,r)=>{let n=e[0][0],s=e[0][1],i=e[1][0],l=e[1][1],f=e[2][0],c=e[2][1],u=.5*Math.abs(n*(l-c)+i*(c-s)+f*(s-l));return o([[2,1,1],[1,2,1],[1,1,2]],t*r/12*u)},q=(e,t,r,n,o)=>(n--,o--,e[--r][r]+=t[0][0],e[n][n]+=t[1][1],e[o][o]+=t[2][2],e[r][n]+=t[0][1],e[n][r]+=t[1][0],e[r][o]+=t[0][2],e[o][r]+=t[2][0],e[n][o]+=t[1][2],e[o][n]+=t[2][1],e),S=(e,t,r)=>{for(let n=0;n<r.length;n++){let o=r[n],s=D(o.setName,t);for(let t=0;t<s.length;t++){e[s[t]-1]=o.temperature}}return e};onmessage=function(e){let r=e.data.inpData,i=e.data.temperature_BC,f=e.data.blocks_termal_conductivity,c=e.data.blocks_density,u=e.data.blocks_specific_heat;try{var h=((e,r,i,f,c,u)=>{y.DP=60;let h=5e3,a=k(e,i),m=R(e,f,c);a=N(a,e);let p=M(a,e);a=A(a,e),null===u&&(u=(e,t)=>{console.log("progress: "+e+"%")});let g=[],w=[];for(let t=0;t<p.length;t++)g.push(0);g=S(g,e,r);let d=[];d.push(g);let v=0;for(let E=0;E<h;E++){let i=o(m,10),f=t(t(p,s(n(a,g),-1)),s(n(m,g),10)),c=l(i,f);w=S(c,e,r),d.push(w),g=w,v+=.02,u(v,w)}return d})(r,i,f,c,u,_)}catch(a){postMessage({action:"error",result:a})}postMessage({action:"done",result:h})};const _=(e,t)=>{postMessage({action:"progress",result:e,temp:t})}})();
//# sourceMappingURL=491.e64a8482.chunk.js.map