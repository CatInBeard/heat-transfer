(()=>{"use strict";const e=e=>{let t=[];for(let r=0;r<e[0].length;r++){t[r]=[];for(let n=0;n<e.length;n++)t[r].push(e[n][r])}return t},t=(e,t)=>{let r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]+t[n];return r},r=(e,t)=>{const r=e.length,n=e[0].length,o=t[0].length;if(n!==t.length)throw new Error("The number of columns in the first matrix must match the number of rows in the second matrix.");const s=[];for(let l=0;l<r;l++){s[l]=[];for(let r=0;r<o;r++){let o=0;for(let s=0;s<n;s++)o+=e[l][s]*t[s][r];s[l][r]=o}}return s},n=(e,t)=>{const r=e.length,n=e[0].length;if(n!==t.length)throw new Error("The number of columns in the matrix must match the length of the vector.");const o=[];for(let s=0;s<r;s++){let r=0;for(let o=0;o<n;o++)r+=e[s][o]*t[o];o[s]=r}return o},o=(e,t)=>{const r=e.length,n=e[0].length,o=[];for(let s=0;s<r;s++){o[s]=[];for(let r=0;r<n;r++)o[s][r]=e[s][r]*t}return o},s=(e,t)=>{const r=[];for(let n=0;n<e.length;n++)r[n]=e[n]*t;return r},l=e=>{const t=e.length,r=Array(t),n=Array(t);for(let o=0;o<t;o++){r[o]=[],n[o]=[];for(let e=0;e<t;e++)r[o][e]=0,n[o][e]=0}for(let o=0;o<t;o++){for(let s=o;s<t;s++){let t=0;for(let e=0;e<o;e++)t+=r[o][e]*n[e][s];n[o][s]=e[o][s]-t}for(let s=o;s<t;s++)if(o===s)r[o][o]=1;else{let t=0;for(let e=0;e<o;e++)t+=r[s][e]*n[e][o];r[s][o]=(e[s][o]-t)/n[o][o]}}return{lower:r,upper:n}},i=(e,t)=>{const r=l(e),n=e.length,o=[],s=[];for(let l=0;l<n;l++){let e=0;for(let t=0;t<l;t++)e+=r.lower[l][t]*o[t];o[l]=(t[l]-e)/r.lower[l][l]}for(let l=n-1;l>=0;l--){let e=0;for(let t=l+1;t<n;t++)e+=r.upper[l][t]*s[t];s[l]=(o[l]-e)/r.upper[l][l]}return s};var f=1e6,u=1e6,c="[big.js] ",h=c+"Invalid ",a=h+"decimal places",m=h+"rounding mode",g=c+"Division by zero",p={},w=void 0,d=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function v(e,t,r,n){var o=e.c;if(r===w&&(r=e.constructor.RM),0!==r&&1!==r&&2!==r&&3!==r)throw Error(m);if(t<1)n=3===r&&(n||!!o[0])||0===t&&(1===r&&o[0]>=5||2===r&&(o[0]>5||5===o[0]&&(n||o[1]!==w))),o.length=1,n?(e.e=e.e-t+1,o[0]=1):o[0]=e.e=0;else if(t<o.length){if(n=1===r&&o[t]>=5||2===r&&(o[t]>5||5===o[t]&&(n||o[t+1]!==w||1&o[t-1]))||3===r&&(n||!!o[0]),o.length=t,n)for(;++o[--t]>9;)if(o[t]=0,0===t){++e.e,o.unshift(1);break}for(t=o.length;!o[--t];)o.pop()}return e}function E(e,t,r){var n=e.e,o=e.c.join(""),s=o.length;if(t)o=o.charAt(0)+(s>1?"."+o.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)o="0"+o;o="0."+o}else if(n>0)if(++n>s)for(n-=s;n--;)o+="0";else n<s&&(o=o.slice(0,n)+"."+o.slice(n));else s>1&&(o=o.charAt(0)+"."+o.slice(1));return e.s<0&&r?"-"+o:o}p.abs=function(){var e=new this.constructor(this);return e.s=1,e},p.cmp=function(e){var t,r=this,n=r.c,o=(e=new r.constructor(e)).c,s=r.s,l=e.s,i=r.e,f=e.e;if(!n[0]||!o[0])return n[0]?s:o[0]?-l:0;if(s!=l)return s;if(t=s<0,i!=f)return i>f^t?1:-1;for(l=(i=n.length)<(f=o.length)?i:f,s=-1;++s<l;)if(n[s]!=o[s])return n[s]>o[s]^t?1:-1;return i==f?0:i>f^t?1:-1},p.div=function(e){var t=this,r=t.constructor,n=t.c,o=(e=new r(e)).c,s=t.s==e.s?1:-1,l=r.DP;if(l!==~~l||l<0||l>f)throw Error(a);if(!o[0])throw Error(g);if(!n[0])return e.s=s,e.c=[e.e=0],e;var i,u,c,h,m,p=o.slice(),d=i=o.length,E=n.length,b=n.slice(0,i),y=b.length,D=e,N=D.c=[],A=0,M=l+(D.e=t.e-e.e)+1;for(D.s=s,s=M<0?0:M,p.unshift(0);y++<i;)b.push(0);do{for(c=0;c<10;c++){if(i!=(y=b.length))h=i>y?1:-1;else for(m=-1,h=0;++m<i;)if(o[m]!=b[m]){h=o[m]>b[m]?1:-1;break}if(!(h<0))break;for(u=y==i?o:p;y;){if(b[--y]<u[y]){for(m=y;m&&!b[--m];)b[m]=9;--b[m],b[y]+=10}b[y]-=u[y]}for(;!b[0];)b.shift()}N[A++]=h?c:++c,b[0]&&h?b[y]=n[d]||0:b=[n[d]]}while((d++<E||b[0]!==w)&&s--);return N[0]||1==A||(N.shift(),D.e--,M--),A>M&&v(D,M,r.RM,b[0]!==w),D},p.eq=function(e){return 0===this.cmp(e)},p.gt=function(e){return this.cmp(e)>0},p.gte=function(e){return this.cmp(e)>-1},p.lt=function(e){return this.cmp(e)<0},p.lte=function(e){return this.cmp(e)<1},p.minus=p.sub=function(e){var t,r,n,o,s=this,l=s.constructor,i=s.s,f=(e=new l(e)).s;if(i!=f)return e.s=-f,s.plus(e);var u=s.c.slice(),c=s.e,h=e.c,a=e.e;if(!u[0]||!h[0])return h[0]?e.s=-f:u[0]?e=new l(s):e.s=1,e;if(i=c-a){for((o=i<0)?(i=-i,n=u):(a=c,n=h),n.reverse(),f=i;f--;)n.push(0);n.reverse()}else for(r=((o=u.length<h.length)?u:h).length,i=f=0;f<r;f++)if(u[f]!=h[f]){o=u[f]<h[f];break}if(o&&(n=u,u=h,h=n,e.s=-e.s),(f=(r=h.length)-(t=u.length))>0)for(;f--;)u[t++]=0;for(f=t;r>i;){if(u[--r]<h[r]){for(t=r;t&&!u[--t];)u[t]=9;--u[t],u[r]+=10}u[r]-=h[r]}for(;0===u[--f];)u.pop();for(;0===u[0];)u.shift(),--a;return u[0]||(e.s=1,u=[a=0]),e.c=u,e.e=a,e},p.mod=function(e){var t,r=this,n=r.constructor,o=r.s,s=(e=new n(e)).s;if(!e.c[0])throw Error(g);return r.s=e.s=1,t=1==e.cmp(r),r.s=o,e.s=s,t?new n(r):(o=n.DP,s=n.RM,n.DP=n.RM=0,r=r.div(e),n.DP=o,n.RM=s,this.minus(r.times(e)))},p.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},p.plus=p.add=function(e){var t,r,n,o=this,s=o.constructor;if(e=new s(e),o.s!=e.s)return e.s=-e.s,o.minus(e);var l=o.e,i=o.c,f=e.e,u=e.c;if(!i[0]||!u[0])return u[0]||(i[0]?e=new s(o):e.s=o.s),e;if(i=i.slice(),t=l-f){for(t>0?(f=l,n=u):(t=-t,n=i),n.reverse();t--;)n.push(0);n.reverse()}for(i.length-u.length<0&&(n=u,u=i,i=n),t=u.length,r=0;t;i[t]%=10)r=(i[--t]=i[t]+u[t]+r)/10|0;for(r&&(i.unshift(r),++f),t=i.length;0===i[--t];)i.pop();return e.c=i,e.e=f,e},p.pow=function(e){var t=this,r=new t.constructor("1"),n=r,o=e<0;if(e!==~~e||e<-1e6||e>u)throw Error(h+"exponent");for(o&&(e=-e);1&e&&(n=n.times(t)),e>>=1;)t=t.times(t);return o?r.div(n):n},p.prec=function(e,t){if(e!==~~e||e<1||e>f)throw Error(h+"precision");return v(new this.constructor(this),e,t)},p.round=function(e,t){if(e===w)e=0;else if(e!==~~e||e<-f||e>f)throw Error(a);return v(new this.constructor(this),e+this.e+1,t)},p.sqrt=function(){var e,t,r,n=this,o=n.constructor,s=n.s,l=n.e,i=new o("0.5");if(!n.c[0])return new o(n);if(s<0)throw Error(c+"No square root");0===(s=Math.sqrt(n+""))||s===1/0?((t=n.c.join("")).length+l&1||(t+="0"),l=((l+1)/2|0)-(l<0||1&l),e=new o(((s=Math.sqrt(t))==1/0?"5e":(s=s.toExponential()).slice(0,s.indexOf("e")+1))+l)):e=new o(s+""),l=e.e+(o.DP+=4);do{r=e,e=i.times(r.plus(n.div(r)))}while(r.c.slice(0,l).join("")!==e.c.slice(0,l).join(""));return v(e,(o.DP-=4)+e.e+1,o.RM)},p.times=p.mul=function(e){var t,r=this,n=r.constructor,o=r.c,s=(e=new n(e)).c,l=o.length,i=s.length,f=r.e,u=e.e;if(e.s=r.s==e.s?1:-1,!o[0]||!s[0])return e.c=[e.e=0],e;for(e.e=f+u,l<i&&(t=o,o=s,s=t,u=l,l=i,i=u),t=new Array(u=l+i);u--;)t[u]=0;for(f=i;f--;){for(i=0,u=l+f;u>f;)i=t[u]+s[f]*o[u-f-1]+i,t[u--]=i%10,i=i/10|0;t[u]=i}for(i?++e.e:t.shift(),f=t.length;!t[--f];)t.pop();return e.c=t,e},p.toExponential=function(e,t){var r=this,n=r.c[0];if(e!==w){if(e!==~~e||e<0||e>f)throw Error(a);for(r=v(new r.constructor(r),++e,t);r.c.length<e;)r.c.push(0)}return E(r,!0,!!n)},p.toFixed=function(e,t){var r=this,n=r.c[0];if(e!==w){if(e!==~~e||e<0||e>f)throw Error(a);for(e=e+(r=v(new r.constructor(r),e+r.e+1,t)).e+1;r.c.length<e;)r.c.push(0)}return E(r,!1,!!n)},p[Symbol.for("nodejs.util.inspect.custom")]=p.toJSON=p.toString=function(){var e=this,t=e.constructor;return E(e,e.e<=t.NE||e.e>=t.PE,!!e.c[0])},p.toNumber=function(){var e=Number(E(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(c+"Imprecise conversion");return e},p.toPrecision=function(e,t){var r=this,n=r.constructor,o=r.c[0];if(e!==w){if(e!==~~e||e<1||e>f)throw Error(h+"precision");for(r=v(new n(r),e,t);r.c.length<e;)r.c.push(0)}return E(r,e<=r.e||r.e<=n.NE||r.e>=n.PE,!!o)},p.valueOf=function(){var e=this,t=e.constructor;if(!0===t.strict)throw Error(c+"valueOf disallowed");return E(e,e.e<=t.NE||e.e>=t.PE,!0)};var b=function e(){function t(r){var n=this;if(!(n instanceof t))return r===w?e():new t(r);if(r instanceof t)n.s=r.s,n.e=r.e,n.c=r.c.slice();else{if("string"!==typeof r){if(!0===t.strict&&"bigint"!==typeof r)throw TypeError(h+"value");r=0===r&&1/r<0?"-0":String(r)}!function(e,t){var r,n,o;if(!d.test(t))throw Error(h+"number");e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(r=t.indexOf("."))>-1&&(t=t.replace(".",""));(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length);for(o=t.length,n=0;n<o&&"0"==t.charAt(n);)++n;if(n==o)e.c=[e.e=0];else{for(;o>0&&"0"==t.charAt(--o););for(e.e=r-n-1,e.c=[],r=0;n<=o;)e.c[r++]=+t.charAt(n++)}}(n,r)}n.constructor=t}return t.prototype=p,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=false,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}();const y=b,D=(e,t)=>{const r=e.length,n=e[0].length,o=[];for(let s=0;s<r;s++){o[s]=[];for(let r=0;r<n;r++)o[s][r]=e[s][r].mul(t)}return o},N=(e,t)=>{let r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n].plus(t[n]);return r},A=(e,t)=>{const r=[];for(let n=0;n<e.length;n++)r[n]=e[n].mul(t);return r},M=(e,t)=>{const r=e.length,n=e[0].length;if(n!==t.length)throw new Error("The number of columns in the matrix must match the length of the vector.");const o=[];for(let s=0;s<r;s++){let r=new y(0);for(let o=0;o<n;o++)r=r.plus(e[s][o].mul(t[o]));o[s]=r}return o},x=(e,t)=>{const r=P(e),n=e.length,o=[],s=[];for(let l=0;l<n;l++){let e=new y(0);for(let t=0;t<l;t++)e=e.plus(r.lower[l][t].mul(o[t]));o[l]=t[l].minus(e).div(r.lower[l][l])}for(let l=n-1;l>=0;l--){let e=new y(0);for(let t=l+1;t<n;t++)e=e.plus(r.upper[l][t].mul(s[t]));s[l]=o[l].minus(e).div(r.upper[l][l])}return s},P=e=>{const t=e.length,r=Array(t),n=Array(t);for(let o=0;o<t;o++){r[o]=[],n[o]=[];for(let e=0;e<t;e++)r[o][e]=new y(0),n[o][e]=new y(0)}for(let o=0;o<t;o++){for(let s=o;s<t;s++){let t=new y(0);for(let e=0;e<o;e++)t=t.plus(r[o][e].mul(n[e][s]));n[o][s]=e[o][s].minus(t)}for(let s=o;s<t;s++)if(o===s)r[o][o]=1;else{let t=0;for(let e=0;e<o;e++)t+=r[s][e]*n[e][o];r[s][o]=e[s][o].minus(t).div(n[o][o])}}return{lower:r,upper:n}},O=e=>{let t=[];for(let r=0;r<e.length;r++)t[r]=new y(e[r]);return t},k=e=>{let t=[];for(let r=0;r<e.length;r++)t[r]=e[r].toNumber();return t},R=e=>{let t=[];for(let r=0;r<e.length;r++){t[r]=[];for(let n=0;n<e.length;n++)t[r][n]=new y(e[r][n])}return t},j=(e,t)=>{let r=t.assembly.nsets.find((t=>t.setname==e));if(!r)throw new Error("Set not found");return r.nodes},q=(e,t)=>(t.steps[0].boundaries.temperature.forEach((r=>{let n=r.setName,o=t.assembly.nsets.find((e=>e.setname==n));if(!o)throw new Error("Nset not found");o.nodes.forEach((t=>{for(let r=0;r<e.length;r++)r!=t-1&&(e[t-1][r]=0)}))})),e),S=(e,t)=>(t.steps[0].boundaries.temperature.forEach((r=>{let n=r.setName,o=t.assembly.nsets.find((e=>e.setname==n));if(!o)throw new Error("Nset not found");o.nodes.forEach((t=>{for(let r=0;r<e.length;r++)r!=t-1&&(e[r][t-1]=0)}))})),e),_=(e,t)=>{let r=[];for(let n=0;n<e.length;n++)r.push(0);return t.steps[0].boundaries.temperature.forEach((n=>{let o=n.setName,s=t.assembly.nsets.find((e=>e.setname==o));if(!s)throw new Error("Nset not found");s.nodes.forEach((t=>{r[t-1]=e[t-1][t-1]*n.temperature;for(let o=0;o<r.length;o++)o!=t-1&&(r[o]-=e[o][t-1]*n.temperature)}))})),r},T=(e,t,r,n)=>{var o;let s=r.find((t=>-1!=t.elements.indexOf(e)));if(!s)throw new Error("Element not in elset");let l=s.setname,i=n.find((e=>e.elsetName==l));if(!i)throw new Error("Elset not in section");return null!==(o=t[i.name])&&void 0!==o?o:0},I=(e,t,r,n)=>{var o;let s=r.find((t=>-1!=t.elements.indexOf(e)));if(!s)throw new Error("Element not in elset");let l=s.setname,i=n.find((e=>e.elsetName==l));if(!i)throw new Error("Elset not in section");return null!==(o=t[i.name])&&void 0!==o?o:0},H=(e,t,r,n)=>{var o;let s=r.find((t=>-1!=t.elements.indexOf(e)));if(!s)throw new Error("Element not in elset");let l=s.setname,i=n.find((e=>e.elsetName==l));if(!i)throw new Error("Elset not in section");return null!==(o=t[i.name])&&void 0!==o?o:0},U=(t,n)=>{let s=t.problemData[0].nodes,l=t.problemData[0].elements,i=new Array(s.length);for(let e=0;e<i.length;e++)i[e]=new Array(s.length).fill(0);for(let f=0;f<l.length;f++){let u=T(l[f][0],n,t.problemData[0].lsets,t.problemData[0].sections),c=[[u,0],[0,u]],h=s[l[f][1]-1][1],a=s[l[f][1]-1][2],m=s[l[f][2]-1][1],g=s[l[f][2]-1][2],p=s[l[f][3]-1][1],w=s[l[f][3]-1][2],d=g-w,v=w-a,E=a-g,b=p-m,y=h-p,D=m-h,N=.5*Math.abs(h*(g-w)+m*(w-a)+p*(a-g)),A=[[d,v,E],[b,y,D]],M=o(r(r(e(A),c),A),1/4*N);i=C(i,M,l[f][1],l[f][2],l[f][3])}return i},z=(e,t,r)=>{let n=e.problemData[0].nodes,o=e.problemData[0].elements,s=new Array(n.length);for(let l=0;l<s.length;l++)s[l]=new Array(n.length).fill(0);for(let l=0;l<o.length;l++){let i=I(o[l][0],t,e.problemData[0].lsets,e.problemData[0].sections),f=H(o[l][0],r,e.problemData[0].lsets,e.problemData[0].sections),u=[[n[o[l][1]-1][1],n[o[l][1]-1][2]],[n[o[l][2]-1][1],n[o[l][2]-1][2]],[n[o[l][3]-1][1],n[o[l][3]-1][2]]],c=B(u,i,f);s=C(s,c,o[l][1],o[l][2],o[l][3])}return s},B=(e,t,r)=>{let n=e[0][0],s=e[0][1],l=e[1][0],i=e[1][1],f=e[2][0],u=e[2][1],c=.5*Math.abs(n*(i-u)+l*(u-s)+f*(s-i));return o([[2,1,1],[1,2,1],[1,1,2]],t*r/12*c)},C=(e,t,r,n,o)=>(n--,o--,e[--r][r]+=t[0][0],e[n][n]+=t[1][1],e[o][o]+=t[2][2],e[r][n]+=t[0][1],e[n][r]+=t[1][0],e[r][o]+=t[0][2],e[o][r]+=t[2][0],e[n][o]+=t[1][2],e[o][n]+=t[2][1],e),F=(e,t,r)=>{for(let n=0;n<r.length;n++){let o=r[n],s=j(o.setName,t);for(let t=0;t<s.length;t++){e[s[t]-1]=o.temperature}}return e},J=(e,t,r)=>{for(let n=0;n<r.length;n++){let o=r[n],s=j(o.setName,t);for(let t=0;t<s.length;t++){e[s[t]-1]=new y(o.temperature)}}return e};onmessage=function(e){let r=e.data.inpData,l=e.data.temperature_BC,f=e.data.blocks_termal_conductivity,u=e.data.blocks_density,c=e.data.blocks_specific_heat,h=e.data.initialTemp,a=e.data.stepIncrement,m=e.data.steps;try{var g=function(e,r,l,f,u,c){let h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:.1,m=arguments.length>8&&void 0!==arguments[8]?arguments[8]:500,g=arguments.length>9&&void 0!==arguments[9]&&arguments[9];y.DP=60;let p=1/a,w=U(e,l),d=z(e,f,u);w=q(w,e);let v=_(w,e);w=S(w,e),null===c&&(c=(e,t)=>{console.log("progress: "+e+"%")});let E=[],b=[];for(let t=0;t<v.length;t++)E.push(h);E=F(E,e,r);let P=[];P.push(E);let j=0;if(g){let t=R(d),n=R(w),o=new y(p),s=O(v),l=O(E),i=[];for(let f=0;f<m;f++){let f=D(t,o),u=N(N(s,A(M(n,l),new y(-1))),A(M(t,l),o)),h=x(f,u);i=J(h,e,r);let a=k(i);P.push(a),l=i,j+=100/m,c(j,a)}}else for(let y=0;y<m;y++){let l=o(d,p),f=t(t(v,s(n(w,E),-1)),s(n(d,E),p)),u=i(l,f);b=F(u,e,r),P.push(b),E=b,j+=100/m,c(j,b)}return P}(r,l,f,u,c,$,h,a,m)}catch(p){postMessage({action:"error",result:p})}postMessage({action:"done",result:g})};const $=(e,t)=>{postMessage({action:"progress",result:e,temp:t})}})();
//# sourceMappingURL=491.dd27d395.chunk.js.map